<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Doorprize Pong-pong</title>
<style>
Â  body, html {
Â  Â  height: 100%;
Â  Â  margin: 0;
Â  Â  font-family: Arial, sans-serif;
Â  }

Â  /* Layer background buram */
Â  .background-blur {
Â  Â  position: fixed;
Â  Â  top: 0; left: 0; right: 0; bottom: 0;
Â  Â  background: url('https://github.com/agungrizki1417/doorprizetenismeja/raw/main/PUSKESMAS.jpeg') no-repeat center center fixed;
Â  Â  background-size: cover;
Â  Â  filter: blur(8px);
Â  Â  z-index: -1;
Â  }

Â  .container {
Â  Â  text-align: center;
Â  Â  padding-top: 50px;
Â  }

Â  .title {
Â  Â  color: green;
Â  Â  font-size: 24px;
Â  Â  font-weight: bold;
Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
Â  }

Â  /* Gaya untuk container roda putar */
Â  .wheel-container {
Â  Â  position: relative;
Â  Â  display: inline-block;
Â  Â  margin: 20px 0;
Â  }

Â  /* Gaya untuk canvas roda */
Â  #spinwheel {
Â  Â  border: 5px solid #fff;
Â  Â  border-radius: 50%;
Â  Â  box-shadow: 0 0 20px rgba(0,0,0,0.5);
Â  Â  transition: transform 10s cubic-bezier(0.25, 0.1, 0.25, 1);
Â  }

Â  /* Tombol putar */
Â  #spin-button {
Â  Â  position: absolute;
Â  Â  top: 50%;
Â  Â  left: 50%;
Â  Â  transform: translate(-50%, -50%);
Â  Â  background-color: #e74c3c;
Â  Â  color: white;
Â  Â  border: none;
Â  Â  padding: 20px 30px;
Â  Â  font-size: 24px;
Â  Â  font-weight: bold;
Â  Â  cursor: pointer;
Â  Â  border-radius: 50px;
Â  Â  transition: background-color 0.3s;
Â  Â  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
Â  }

Â  #spin-button:hover {
Â  Â  background-color: #c0392b;
Â  }

Â  #spin-button:disabled {
Â  Â  background-color: #ccc;
Â  Â  cursor: not-allowed;
Â  }

Â  /* Panah penunjuk */
Â  .arrow {
Â  Â  position: absolute;
Â  Â  top: 0;
Â  Â  left: 50%;
Â  Â  transform: translateX(-50%);
Â  Â  width: 0;
Â  Â  height: 0;
Â  Â  border-left: 15px solid transparent;
Â  Â  border-right: 15px solid transparent;
Â  Â  border-top: 30px solid #e74c3c;
Â  }

Â  /* Kotak pemenang */
Â  .winner-display {
Â  Â  Â  margin-top: 20px;
Â  Â  Â  padding: 20px;
Â  Â  Â  background-color: rgba(255, 255, 255, 0.3); /* Transparan */
Â  Â  Â  border-radius: 10px;
Â  Â  Â  color: white;
Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
Â  Â  Â  backdrop-filter: blur(5px);
Â  Â  Â  -webkit-backdrop-filter: blur(5px); /* Untuk Safari */
Â  Â  Â  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
Â  Â  Â  max-width: 500px;
Â  Â  Â  margin-left: auto;
Â  Â  Â  margin-right: auto;
Â  Â  Â  display: none; /* Sembunyikan secara default */
Â  Â  Â  transition: opacity 1s ease;
Â  }

Â  .winner-display h2 {
Â  Â  Â  font-size: 30px;
Â  Â  Â  margin: 0;
Â  }

Â  /* CSS untuk animasi kembang api */
Â  @keyframes fireworkBurst {
Â  Â  Â  0% { transform: scale(0.1); opacity: 1; }
Â  Â  Â  50% { transform: scale(1.5); opacity: 0.8; }
Â  Â  Â  100% { transform: scale(2.0); opacity: 0; }
Â  }
</style>
</head>
<body>

<div class="background-blur"></div>

<div class="container">
Â  <h1 class="title">ğŸ RODA PUTAR DOORPRIZE TENIS MEJA PUSKESMAS PETANAHAN ğŸ</h1>
Â Â 
Â  <div class="wheel-container">
Â  Â  <canvas id="spinwheel" width="600" height="600"></canvas>
Â  Â  <div class="arrow"></div>
Â  Â  <button id="spin-button">PUTAR!</button>
Â  </div>

Â  Â  <div id="winner-box" class="winner-display">
Â  Â  Â  <h2>Sing menang: <span id="winner-name"></span></h2>
Â  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>

<script>
Â  const canvas = document.getElementById('spinwheel');
Â  const ctx = canvas.getContext('2d');
Â  const spinBtn = document.getElementById('spin-button');
Â  const winnerBox = document.getElementById('winner-box');
Â  const winnerNameElement = document.getElementById('winner-name');

Â  let totalRotation = 0;

Â  // Efek suara putaran roda ('pusing' kartun)
Â  const spinSynth = new Tone.Synth({
Â  Â  oscillator: { type: "sine" },
Â  Â  envelope: {
Â  Â  Â  attack: 0.01,
Â  Â  Â  decay: 0.1,
Â  Â  Â  sustain: 0.5,
Â  Â  Â  release: 0.5
Â  Â  }
Â  }).toDestination();

Â  const lfo = new Tone.LFO({
Â  Â  frequency: 10,
Â  Â  amplitude: 0.8,
Â  Â  min: 200,
Â  Â  max: 800
Â  }).connect(spinSynth.frequency);

Â  // OPSI EFEK SUARA KEMENANGAN (Pilih salah satu dengan menghapus "//")
Â  // ====================================================================

Â  // Opsi 1 (Standar): Terompet Fanfare Klasik
Â  const trumpetSynth = new Tone.Synth({
Â  Â  oscillator: { type: "sine" },
Â  Â  envelope: {
Â  Â  Â  attack: 0.05,
Â  Â  Â  decay: 0.2,
Â  Â  Â  sustain: 0.3,
Â  Â  Â  release: 0.5
Â  Â  }
Â  }).toDestination();
Â  const trumpetFanfare = [
Â  Â  { note: "C4", time: "0" },
Â  Â  { note: "G4", time: "0.4" },
Â  Â  { note: "C5", time: "0.8" },
Â  Â  { note: "G5", time: "1.2" },
Â  Â  { note: "C6", time: "1.6" }
Â  ];
Â Â 
Â  // Opsi 2: Jingle Kemenangan yang Lebih Ceria
Â  // Gunakan ini untuk suara yang lebih "game show"
Â  const jingleSynth = new Tone.PolySynth(Tone.Synth, {
Â  Â  Â  oscillator: { type: "triangle" },
Â  Â  Â  envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.5 }
Â  }).toDestination();
Â  const jingleMelody = [
Â  Â  Â  { note: "G4", time: "0" },
Â  Â  Â  { note: "A4", time: "0.2" },
Â  Â  Â  { note: "G5", time: "0.4" },
Â  Â  Â  { note: "C5", time: "0.6" }
Â  ];

Â  // Opsi 3: Kemenangan yang Triumfan dengan Ledakan
Â  // Gabungkan melodi terompet dengan efek drum untuk kesan lebih besar
Â  const dramaticSynth = new Tone.PolySynth(Tone.Synth, {
Â  Â  Â  oscillator: { type: "sawtooth" },
Â  Â  Â  envelope: { attack: 0.05, decay: 0.5, sustain: 0.1, release: 0.8 }
Â  }).toDestination();
Â  const dramaticFanfare = [
Â  Â  Â  { note: "C4", time: "0" },
Â  Â  Â  { note: "F4", time: "0.4" },
Â  Â  Â  { note: "A4", time: "0.8" },
Â  Â  Â  { note: "C5", time: "1.2" }
Â  ];
Â  const dramaticBang = new Tone.MembraneSynth().toDestination();


Â  // Mulai audio context agar Tone.js bisa bekerja
Â  document.documentElement.addEventListener("mousedown", () => {
Â  Â  if (Tone.context.state !== "running") {
Â  Â  Â  Tone.start();
Â  Â  }
Â  });

Â  // --- MENGUBAH `const` MENJADI `let` AGAR DAFTAR BISA DIUBAH ---
Â  let names = [
Â  Â  'dr. R. Sunarko Slamet', 'Imam Jajuli', 'Wasikin', 'Tri Yuliani', 'Pramono',Â 
Â  Â  'Sugiyati', 'Siti Zulaikhah Kuntowati', 'Arida Zuhairoh', 'Riska Pramita Hapsari',Â 
Â  Â  'Suryanti', 'Ariyani Muldaningsih', 'Istiqomah', 'Sulsi Astuti', 'Suharjono',Â 
Â  Â  'Ratna Andriyani', 'Romeli', 'Maryanti', 'Nur Setiyani', 'dr. Ratna Prabawati Nopiutami',Â 
Â  Â  'Diyana Susanti', 'Faoji', 'M. Noer', 'Agung Rizki Maulana', 'Habibullah',Â 
Â  Â  'Rifkhi Anisa Wijayanti', 'Ahmad Faozan', 'Miyas Indra Utami', 'Ayu Indrarti',Â 
Â  Â  'Habibiena Noviyanti', 'Fitri Nurkhasanah', 'Sunarmono Maulud', 'Fitriyanah',Â 
Â  Â  'Yusup Kurniawan', 'Haryanto', 'Fahmi Fajarwati', 'dr. Muhammad Daffa Ramadhan',Â 
Â  Â  'Joko Susilo', 'Kesyia Ayuni Asnidatama', 'Faisal Azis Sofian', 'Haryono'
Â  ];

Â  const colors = [
Â  Â  '#FF6F61', '#6B5B95', '#88B04B', '#F7CAC9', '#92A8D1',Â 
Â  Â  '#955251', '#B565A7', '#009B77', '#DD4124', '#D64161',Â 
Â  Â  '#FF7B25', '#C7D3D4', '#E27D60', '#A9A9A9', '#C0C0C0',Â 
Â  Â  '#F4E1D2', '#EDC7B7', '#B3A369', '#E0B589', '#C83349'
Â  ];

Â  function drawWheel() {
Â  Â  // Hapus konten canvas yang lama sebelum menggambar ulang
Â  Â  ctx.clearRect(0, 0, canvas.width, canvas.height);
Â  Â  const numNames = names.length;
Â  Â Â 
Â  Â  // Jika tidak ada nama lagi, tampilkan pesan
Â  Â  if (numNames === 0) {
Â  Â  Â  Â  ctx.fillStyle = "#fff";
Â  Â  Â  Â  ctx.font = "30px Arial";
Â  Â  Â  Â  ctx.textAlign = "center";
Â  Â  Â  Â  ctx.fillText("Semua sudah menang!", 300, 300);
Â  Â  Â  Â  spinBtn.disabled = true;
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  const arcSize = (2 * Math.PI) / numNames;
Â  Â  for (let i = 0; i < numNames; i++) {
Â  Â  Â  const angle = i * arcSize;
Â  Â  Â Â 
Â  Â  Â  ctx.beginPath();
Â  Â  Â  ctx.arc(300, 300, 300, angle, angle + arcSize);
Â  Â  Â  ctx.lineTo(300, 300);
Â  Â  Â Â 
Â  Â  Â  const colorIndex = i % colors.length;
Â  Â  Â  ctx.fillStyle = colors[colorIndex];
Â  Â  Â  ctx.fill();

Â  Â  Â  // Menggambar teks nama
Â  Â  Â  ctx.save();
Â  Â  Â  ctx.translate(300, 300);
Â  Â  Â  ctx.rotate(angle + arcSize / 2);
Â  Â  Â  ctx.textAlign = 'right';
Â  Â  Â  ctx.fillStyle = '#fff';
Â  Â  Â  ctx.font = '20px Arial';
Â  Â  Â  ctx.fillText(names[i], 280, 10);
Â  Â  Â  ctx.restore();
Â  Â  }
Â  }

Â  // Fungsi untuk membuat animasi kembang api
Â  function showFireworks() {
Â  Â  Â  for (let i = 0; i < 50; i++) {
Â  Â  Â  Â  Â  const firework = document.createElement('div');
Â  Â  Â  Â  Â  firework.style.position = 'absolute';
Â  Â  Â  Â  Â  firework.style.width = '10px';
Â  Â  Â  Â  Â  firework.style.height = '10px';
Â  Â  Â  Â  Â  firework.style.borderRadius = '50%';
Â  Â  Â  Â  Â  firework.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
Â  Â  Â  Â  Â  firework.style.boxShadow = `0 0 10px 5px hsl(${Math.random() * 360}, 100%, 50%)`;
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  const offsetX = (Math.random() - 0.5) * 600;
Â  Â  Â  Â  Â  const offsetY = (Math.random() - 0.5) * 600;
Â  Â  Â  Â  Â  firework.style.left = `calc(50% + ${offsetX}px)`;
Â  Â  Â  Â  Â  firework.style.top = `calc(50% + ${offsetY}px)`;
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  firework.style.animation = `fireworkBurst 5s ease-out forwards`;
Â  Â  Â  Â  Â  firework.style.animationDelay = `${Math.random() * 1}s`;
Â  Â  Â  Â  Â  firework.style.zIndex = 10;
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  document.body.appendChild(firework);
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  Â  Â  Â  firework.remove();
Â  Â  Â  Â  Â  }, 5000);
Â  Â  Â  }
Â  }

Â  function spin() {
Â  Â  spinBtn.disabled = true;
Â  Â  winnerBox.style.display = 'none';

Â  Â  if (names.length === 0) {
Â  Â  Â  Â  winnerNameElement.textContent = "Tidak ada peserta lagi!";
Â  Â  Â  Â  winnerBox.style.display = 'block';
Â  Â  Â  Â  spinBtn.disabled = true;
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  lfo.start();
Â  Â  spinSynth.triggerAttack("C5");

Â  Â  const numNames = names.length;
Â  Â  const degreesPerSlice = 360 / numNames;
Â  Â Â 
Â  Â  // Tambahkan rotasi acak
Â  Â  const randomRotation = Math.floor(Math.random() * 360);
Â  Â  const baseRotation = 360 * 10;
Â  Â  totalRotation += baseRotation + randomRotation;
Â  Â Â 
Â  Â  canvas.style.transform = `rotate(${totalRotation}deg)`;

Â  Â  setTimeout(() => {
Â  Â  Â  lfo.stop();
Â  Â  Â  spinSynth.triggerRelease();
Â  Â  Â  playDramaticFanfare();
Â  Â  Â  showFireworks();

Â  Â  Â  // Hitung nama pemenang dari posisi akhir roda
Â  Â  Â  const finalAngle = totalRotation % 360;
Â  Â  Â  const pointerOffset = 270;
Â  Â  Â  const adjustedAngle = (finalAngle + pointerOffset) % 360;
Â  Â  Â  let winningIndex = Math.floor(adjustedAngle / degreesPerSlice);
Â  Â  Â Â 
Â  Â  Â  // Tangani kasus di mana indeks melebihi jumlah nama
Â  Â  Â  if (winningIndex >= names.length) {
Â  Â  Â  Â  winningIndex = names.length - 1;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  const winnerName = names[winningIndex];

Â  Â  Â  winnerNameElement.textContent = winnerName;
Â  Â  Â  winnerBox.style.display = 'block';
Â  Â  Â  spinBtn.disabled = false;
Â  Â  Â  names.splice(winningIndex, 1);
Â  Â  Â  drawWheel();
Â  Â  }, 10000);Â Â 
Â  }
Â Â 
Â  // Fungsi untuk Opsi 1: Terompet Fanfare Klasik
Â  function playTrumpetFanfare() {
Â  Â  Â  trumpetFanfare.forEach((event) => {
Â  Â  Â  Â  Â  trumpetSynth.triggerAttackRelease(event.note, "0.4", Tone.now() + parseFloat(event.time));
Â  Â  Â  });
Â  }
Â Â 
Â  // Fungsi untuk Opsi 2: Jingle Kemenangan
Â  function playJingleMelody() {
Â  Â  Â  jingleMelody.forEach((event) => {
Â  Â  Â  Â  Â  jingleSynth.triggerAttackRelease(event.note, "0.4", Tone.now() + parseFloat(event.time));
Â  Â  Â  });
Â  }
Â Â 
Â  // Fungsi untuk Opsi 3: Kemenangan Triumfan dengan Ledakan
Â  function playDramaticFanfare() {
Â  Â  Â  dramaticFanfare.forEach((event) => {
Â  Â  Â  Â  Â  dramaticSynth.triggerAttackRelease(event.note, "0.4", Tone.now() + parseFloat(event.time));
Â  Â  Â  });
Â  Â  Â  dramaticBang.triggerAttackRelease("C1", "8n", Tone.now() + 1.2);
Â  }

Â  spinBtn.addEventListener('click', spin);
Â  drawWheel();
</script>
</body>
</html>
